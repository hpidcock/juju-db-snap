#!/bin/bash
set -e

# Do we want to split out the dbpath and log path and include them separately? (i.e. use a snap config setting)
args_file=$SNAP_COMMON/mongoargs

# cribbed from microk8s snap config, resolves env vars within the config file.
# we could also just use "$(snapctl get args)" (assuming we converge dbpath and logpath there too.)
declare -a args="($(cat $args_file))"
exec "$SNAP/bin/mongod" "${args[@]}"

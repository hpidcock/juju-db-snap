name: juju-db
base: core18
version: '3.6'
summary: Mongodb object/document oriented database used internally by Juju
description: |
  Mongodb object/document oriented database used internally by Juju
grade: devel
confinement: devmode

parts:
  wrappers:
    plugin: dump
    source: snap/local/

  mongo:
    plugin: dump
    source: https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.6.9.tgz
    source-type: tar
    prime:
      - bin/*
      - -bin/install_compass
      - -bin/bsondump
      - -bin/mongodump
      - -bin/mongoexport
      - -bin/mongofiles
      - -bin/mongoimport
      - -bin/mongoperf
      - -bin/mongoreplay
      - -bin/mongorestore
      - -bin/mongostat
      - -bin/mongotop

apps:
  mongod:
    command: mongod
    plugs:
      - network

  daemon:
    command: commands/daemon.start
    stop-timeout: 600s
    restart-condition: on-failure
    daemon: simple
    plugs:
      - network-bind

  mongos:
    command: mongos
    plugs:
      - network

  mongo:
    command: mongo
    plugs:
      - network

